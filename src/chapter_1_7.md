# 图形程序设计和编码

<br/>
&emsp;&emsp;某些常见的策略在图形编程中经常是有用的。在本节中，我们提供了一些建议，当你实现本书所学的方法时，你可能会发现这些建议很有帮助。

## 类型设计
&emsp;&emsp;任何图形程序的一个关键部分是为几何实体（如向量和矩阵）以及图形实体（如RGB颜色和图像）提供良好的类或例程。这些例程应该尽可能的简洁和高效。一个普遍的设计问题是，位置和位移是否应该成为独立的类别，因为它们有不同的操作；例如，一个位置乘以二分之一没有几何意义，而位移的二分之一却有意义（Goldman, 1985; DeRose, 1989）。在这个问题上几乎没有一致的意见，这可能会在图形从业者中引发数小时的激烈争论，但为了举例说明，我们假设不做这种区分。

我坚信KISS（"保持简单，愚蠢"）原则，从这个角度来看，两个类的论点并不令人信服，不足以证明增加的复杂性。-P.S.

我喜欢把指针和向量分开，因为它使代码更易读，并能让编译器捕捉到一些错误。-S.M.

&emsp;&emsp;这意味着要编写的一些基本类型包括：
- 二维向量（vector2）。一个二维向量类型用于存储x和y分量。它应该将这些分量存储在一个长度为2的数组中，这样就可以很好地支持一个索引操作。你还应该包括矢量加法、矢量减法、点积、交叉积、标量乘法和标量除法的操作。
-  三维向量（vector3）。一个类似于二维向量的三维向量类型。
- h向量（hvector）。一个有四个分量的同质向量（见第8章）。
- rgb。每种RGB颜色存储三个成分。你还应该包括RGB加法、RGB减法、RGB乘法、标量乘法和标量除法的操作。
- 变换。一个用于变换的4×4矩阵。你应该包括一个矩阵乘法和成员函数来应用于位置、方向和表面法向量。如第七章所示，这些都是不同的。
- 图像。一个具有输出操作的RGB像素的二维数组。

此外，你可能想或不想为时间间隔、正交基和坐标系添加类型。